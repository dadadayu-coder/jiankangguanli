<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>健康指标监测系统</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            margin: 0;
            padding: 0;
            background-color: #f5f7fa;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            background-color: #4CAF50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .form-section {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .form-row {
            display: flex;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .form-group {
            flex: 1;
            min-width: 200px;
            margin: 0 10px 10px 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .btn-calculate {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            display: block;
            margin: 0 auto;
        }
        
        .btn-calculate:hover {
            background-color: #45a049;
        }
        
        .result-section {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: none;
        }
        
        .result-section h2 {
            color: #4CAF50;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .bmi-result {
            margin: 10px 0;
        }
        
        .advice {
            background-color: #e8f5e9;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
        
        .chart-container {
            height: 300px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>健康指标监测系统</h1>
            <p>输入您的健康数据，获取健康建议和可视化分析</p>
        </header>
        
        <section class="form-section">
            <h2>输入健康数据</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="gender">性别</label>
                    <select id="gender" required>
                        <option value="">请选择</option>
                        <option value="male">男</option>
                        <option value="female">女</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="age">年龄</label>
                    <input type="number" id="age" min="1" max="120" placeholder="请输入年龄" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="height">身高 (cm)</label>
                    <input type="number" id="height" min="100" max="250" placeholder="例如: 170" required>
                </div>
                <div class="form-group">
                    <label for="weight">体重 (kg)</label>
                    <input type="number" id="weight" min="30" max="300" placeholder="例如: 65" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="bp_high">血压高压 (mmHg)</label>
                    <input type="number" id="bp_high" min="60" max="200" placeholder="例如: 120" required>
                </div>
                <div class="form-group">
                    <label for="bp_low">血压低压 (mmHg)</label>
                    <input type="number" id="bp_low" min="40" max="120" placeholder="例如: 80" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="blood_sugar">血糖值 (mmol/L)</label>
                    <input type="number" id="blood_sugar" min="2.2" max="30" step="0.1" placeholder="例如: 5.5" required>
                </div>
            </div>
            
            <button class="btn-calculate" id="calculate-btn">计算健康指标</button>
        </section>
        
        <section id="result-section" class="result-section">
            <h2>健康指标结果</h2>
            <div class="bmi-result">
                <h3>BMI指数: <span id="bmi-value">--</span></h3>
                <p id="bmi-category">--</p>
            </div>
            
            <h3>健康建议</h3>
            <div id="advice" class="advice">
                <p id="bmi-advice">--</p>
                <p id="bp-advice">--</p>
                <p id="sugar-advice">--</p>
            </div>
            
            <h3>健康指标可视化</h3>
            <div class="chart-container">
                <canvas id="health-chart"></canvas>
            </div>
        </section>
    </div>

    <script>
        document.getElementById('calculate-btn').addEventListener('click', calculateHealthMetrics);
        
        function calculateHealthMetrics() {
            // 获取输入值
            const gender = document.getElementById('gender').value;
            const age = parseFloat(document.getElementById('age').value);
            const height = parseFloat(document.getElementById('height').value) / 100; // 转换为米
            const weight = parseFloat(document.getElementById('weight').value);
            const bpHigh = parseFloat(document.getElementById('bp_high').value);
            const bpLow = parseFloat(document.getElementById('bp_low').value);
            const bloodSugar = parseFloat(document.getElementById('blood_sugar').value);
            
            // 验证输入
            if (!gender || isNaN(age) || isNaN(height) || isNaN(weight) || 
                isNaN(bpHigh) || isNaN(bpLow) || isNaN(bloodSugar)) {
                alert('请填写所有必填字段');
                return;
            }
            
            // 计算BMI
            const bmi = weight / (height * height);
            const roundedBMI = bmi.toFixed(2);
            
            // 确定BMI分类
            let bmiCategory = '';
            if (bmi < 18.5) {
                bmiCategory = '体重过轻';
            } else if (bmi >= 18.5 && bmi < 24) {
                bmiCategory = '体重正常';
            } else if (bmi >= 24 && bmi < 28) {
                bmiCategory = '超重';
            } else if (bmi >= 28 && bmi < 32) {
                bmiCategory = '肥胖';
            } else {
                bmiCategory = '重度肥胖';
            }
            
            // BMI建议
            let bmiAdvice = '';
            if (bmi < 18.5) {
                bmiAdvice = '您的体重低于正常范围。建议增加营养摄入，增加体重。可以适当增加蛋白质和健康脂肪的摄入，同时保持适量运动。';
            } else if (bmi >= 18.5 && bmi < 24) {
                bmiAdvice = '您的体重处于健康范围。继续保持平衡的饮食和规律的运动。';
            } else if (bmi >= 24 && bmi < 28) {
                bmiAdvice = '您的体重略高于正常范围。建议控制饮食，减少高热量食物的摄入，并增加有氧运动，如快走、游泳或骑自行车。';
            } else {
                bmiAdvice = '您的体重明显高于正常范围，属于肥胖。建议采取健康的减肥策略，包括均衡饮食（多蔬果、低糖低脂肪）、规律运动（每周至少150分钟中等强度运动）和充足睡眠。如有需要，请咨询医生或营养师。';
            }
            
            // 血压建议
            let bpAdvice = '';
            if (bpHigh < 90 || bpLow < 60) {
                bpAdvice = '您的血压低于正常范围。建议适当增加盐分摄入，保持充足的水分，避免长时间站立，并咨询医生的建议。';
            } else if (bpHigh < 120 && bpLow < 80) {
                bpAdvice = '您的血压处于理想范围。继续保持健康的生活方式。';
            } else if (bpHigh < 130 && bpLow < 85) {
                bpAdvice = '您的血压处于正常范围。继续保持健康的生活方式。';
            } else if (bpHigh < 140 && bpLow < 90) {
                bpAdvice = '您的血压处于正常高值。建议定期监测血压，减少盐分摄入，增加水果和蔬菜，保持健康体重，定期锻炼。';
            } else if (bpHigh < 160 && bpLow < 100) {
                bpAdvice = '您的血压处于高血压阶段1。建议改变生活方式：减少盐分摄入，增加水果和蔬菜，保持健康体重，定期锻炼。如有需要，请咨询医生可能需要药物治疗。';
            } else {
                bpAdvice = '您的血压处于高血压阶段2。建议立即就医，可能需要药物治疗。同时改变生活方式：减少盐分摄入，增加水果和蔬菜，保持健康体重，定期锻炼，并避免酒精和烟酒。';
            }
            
            // 血糖建议
            let sugarAdvice = '';
            if (bloodSugar < 3.9) {
                sugarAdvice = '您的血糖过低。建议立即进食含糖食物（如果汁、糖果）并咨询医生。';
            } else if (bloodSugar < 6.1) {
                sugarAdvice = '您的空腹血糖正常。继续保持健康饮食和规律运动。';
            } else if (bloodSugar < 7.0) {
                sugarAdvice = '您的空腹血糖略高（糖尿病前期）。建议减少精制碳水化合物摄入，增加膳食纤维，保持健康体重，并定期监测血糖。如有需要，请咨询医生。';
            } else {
                sugarAdvice = '您的空腹血糖明显高于正常范围，提示可能患有糖尿病。建议立即就医，可能需要药物治疗，并遵循医生的饮食和运动建议。';
            }
            
            // 运动建议（根据BMI、血压和血糖综合考虑）
            let exerciseAdvice = '';
            
            // 如果血压过高
            if (bpHigh >= 140 || bpLow >= 90) {
                exerciseAdvice = '请先咨询医生后再进行运动计划。建议从低强度运动开始，如散步、瑜伽等。';
            } else {
                // 根据BMI和血糖推荐不同运动
                if (bmi >= 24 || bloodSugar >= 6.1) {
                    exerciseAdvice = '建议增加有氧运动和力量训练。如：每周至少150分钟中等强度有氧运动（快走、游泳、骑自行车）和2-3次力量训练。';
                } else {
                    exerciseAdvice = '保持规律的中等强度运动，如每周至少150分钟有氧运动（快走、慢跑、游泳等）有助于维持健康体重和心血管健康。';
                }
            }
            
            // 饮食建议
            let dietAdvice = '';
            
            if (bmi < 18.5) {
                dietAdvice = '增加蛋白质、健康脂肪和复合碳水化合物的摄入。可适当增加坚果、鱼类、瘦肉、全谷物等食物。';
            } else if (bmi >= 24 || bpHigh >= 130 || bloodSugar >= 6.1) {
                dietAdvice = '减少精制糖、盐和饱和脂肪的摄入。增加蔬菜、水果、全谷物、优质蛋白质（如鱼、豆类、瘦肉）和健康脂肪（如橄榄油、坚果）的摄入。';
            } else {
                dietAdvice = '保持均衡饮食，多吃蔬菜水果，适量摄入蛋白质和健康脂肪，控制精制糖和盐的摄入。';
            }
            
            // 显示结果
            document.getElementById('bmi-value').textContent = roundedBMI;
            document.getElementById('bmi-category').textContent = bmiCategory;
            
            document.getElementById('bmi-advice').textContent = bmiAdvice;
            document.getElementById('bp-advice').textContent = bpAdvice;
            document.getElementById('sugar-advice').textContent = sugarAdvice;
            
            document.getElementById('advice').innerHTML = `
                <p><strong>运动建议：</strong> ${exerciseAdvice}</p>
                <p><strong>饮食建议：</strong> ${dietAdvice}</p>
            `;
            
            // 显示结果部分
            document.getElementById('result-section').style.display = 'block';
            
            // 创建图表
            createHealthChart(bmi, bpHigh, bpLow, bloodSugar);
        }
        
        function createHealthChart(bmi, bpHigh, bpLow, bloodSugar) {
            // 获取画布元素
            const ctx = document.getElementById('health-chart').getContext('2d');
            
            // 清除之前的图表
            if (window.healthChart) {
                window.healthChart.destroy();
            }
            
            // 健康范围数据
            const healthRanges = {
                bmi: {
                    min: 18.5,
                    max: 24,
                    name: 'BMI指数'
                },
                bpHigh: {
                    min: 90,
                    max: 120,
                    name: '血压高压'
                },
                bpLow: {
                    min: 60,
                    max: 80,
                    name: '血压低压'
                },
                bloodSugar: {
                    min: 3.9,
                    max: 6.1,
                    name: '血糖值'
                }
            };
            
            // 图表数据
            const data = {
                labels: ['BMI指数', '血压高压', '血压低压', '血糖值'],
                datasets: [
                    {
                        label: '健康范围最低值',
                        data: [healthRanges.bmi.min, healthRanges.bpHigh.min, healthRanges.bpLow.min, healthRanges.bloodSugar.min],
                        borderColor: 'rgba(255, 99, 132, 1)',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        borderWidth: 2,
                        fill: false
                    },
                    {
                        label: '健康范围最高值',
                        data: [healthRanges.bmi.max, healthRanges.bpHigh.max, healthRanges.bpLow.max, healthRanges.bloodSugar.max],
                        borderColor: 'rgba(54, 162, 235, 1)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        borderWidth: 2,
                        fill: false
                    },
                    {
                        label: '您的当前值',
                        data: [bmi, bpHigh, bpLow, bloodSugar],
                        borderColor: 'rgba(75, 192, 75, 1)',
                        backgroundColor: 'rgba(75, 192, 75, 0.1)',
                        borderWidth: 3,
                        pointBackgroundColor: 'rgba(75, 192, 75, 1)',
                        pointRadius: 5,
                        fill: false
                    }
                ]
            };
            
            // 创建图表
            window.healthChart = new Chart(ctx, {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: '数值'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '健康指标'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: '健康指标与健康范围比较',
                            font: {
                                size: 16
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>